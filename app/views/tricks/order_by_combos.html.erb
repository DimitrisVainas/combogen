<div id="title" class="container">
  <h1>Trick Database</h1>
  <p>Discover new ways to move!</p>
</div>

<div id="actions-top" class="container">
  <%= render 'index_actions' %>
</div>

<div class="container mbl">
  <table>
    <tr>
      <th>Id <%= link_to "↓", tricks_path(sort: "id") %></th>
      <th>Name <%= link_to "↓", tricks_path(sort: "name") %></th>
      <th>Difficulty <%= link_to "↓", tricks_path(sort: "difficulty") %></th>
      <th>Setup <%= link_to "↓", tricks_path(sort: "setup") %></th>
      <th>Combos <%= link_to "↓", order_by_combos_path %></th>
      <% if tricker_signed_in? %>
        <th colspan="3">Actions</th>
      <% end %>
    </tr>

  <% @tricks.each do |trick| %>
    <tr>
      <td><%= trick.id %></td>
      <td><%= trick.name %></td>
      <td><%= trick.difficulty %></td>
      <td><%= trick.setup %></td>
      <td><%= trick.combos.length %></td>
      <% if tricker_signed_in? %>
        <% if (trick.tricker_id == current_tricker.id) || current_tricker.try(:admin?) %>
          <td><%= link_to 'Show', trick %></td>
          <td><%= link_to 'Edit', edit_trick_path(trick) %></td>
          <td><%= link_to 'Destroy', trick, method: :delete, data: { confirm: 'Destroying a trick will also remove it from all combos. The ones left with less than two tricks will be destroyed as well. Are you sure you want to continue?' } %></td>
        <% else %>
          <td colspan="3"></td>
        <% end %>
      <% end %>
    </tr>
  <% end %>
  </table>
</div>

<div id="actions-bottom" class="container">
  <%= link_to 'Back to Main', {:controller => :welcome, :action => :index}, :class => "btn mrs" %>
  <% if tricker_signed_in? %>
    <%= link_to 'Add Trick', new_trick_path, :class => "btn btn-green mrs" %>
  <% end %>
  <p id="notice"><%= notice %></p>
</div>
